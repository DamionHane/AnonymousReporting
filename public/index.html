<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anonymous Reporting System - Privacy-Protected Reporting Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }

        .nav-tab {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .nav-tab.active {
            background: white;
            border-bottom: 3px solid #2a5298;
            font-weight: bold;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #2c3e50;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #2a5298;
            box-shadow: 0 0 0 3px rgba(42, 82, 152, 0.1);
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(42, 82, 152, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            color: white;
        }

        .btn-danger {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
        }

        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #2a5298;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status-submitted {
            background: #fff3cd;
            color: #856404;
        }

        .status-investigating {
            background: #cce5ff;
            color: #004085;
        }

        .status-resolved {
            background: #d4edda;
            color: #155724;
        }

        .status-dismissed {
            background: #f8d7da;
            color: #721c24;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .connection-status {
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
        }

        .connected {
            background: #d4edda;
            color: #155724;
        }

        .disconnected {
            background: #f8d7da;
            color: #721c24;
        }

        .privacy-notice {
            background: #e9ecef;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #6c757d;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .checkbox-group input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        @media (max-width: 768px) {
            .nav-tabs {
                flex-direction: column;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõ°Ô∏è Anonymous Reporting System</h1>
            <p>Blockchain-based Privacy-Protected Reporting Platform</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('report')">Submit Report</button>
            <button class="nav-tab" onclick="showTab('track')">Track Progress</button>
            <button class="nav-tab" onclick="showTab('investigate')">Investigation Management</button>
            <button class="nav-tab" onclick="showTab('stats')">Statistics</button>
        </div>

        <div id="connection-status" class="connection-status disconnected">
            üî¥ Wallet Not Connected
        </div>

        <div class="tab-content active" id="report-tab">
            <div class="privacy-notice">
                <h3>üîê Privacy Protection Notice</h3>
                <p>This system uses advanced Fully Homomorphic Encryption (FHE) technology to protect your identity and report content. All sensitive information is encrypted on the blockchain, and only authorized investigators can decrypt it when necessary.</p>
            </div>

            <div id="report-alert" class="alert"></div>

            <form id="reportForm">
                <div class="form-group">
                    <label for="category">Report Category</label>
                    <select id="category" class="form-control" required>
                        <option value="">Please select a report category</option>
                        <option value="0">Corruption</option>
                        <option value="1">Fraud</option>
                        <option value="2">Environmental</option>
                        <option value="3">Safety</option>
                        <option value="4">Discrimination</option>
                        <option value="5">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="description">Report Details (Optional)</label>
                    <textarea id="description" class="form-control" rows="6"
                        placeholder="Please describe the issue you want to report in detail. This information will be encrypted for protection."></textarea>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="anonymous" checked>
                    <label for="anonymous">Anonymous Report (Recommended)</label>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="privacy-agree" required>
                    <label for="privacy-agree">I have read and agree to the privacy protection terms</label>
                </div>

                <button type="submit" class="btn btn-primary">üöÄ Submit Report</button>
            </form>
        </div>

        <div class="tab-content" id="track-tab">
            <div class="card">
                <h3>üìã Track Report Progress</h3>
                <div class="form-group">
                    <label for="reportId">Report ID</label>
                    <input type="number" id="reportId" class="form-control"
                        placeholder="Enter your report ID">
                </div>
                <button onclick="trackReport()" class="btn btn-primary">üîç Track Progress</button>
            </div>

            <div id="trackResult" style="display: none;" class="card">
                <h4>üìä Report Status</h4>
                <div id="reportInfo"></div>
            </div>
        </div>

        <div class="tab-content" id="investigate-tab">
            <div class="card">
                <h3>üîç Investigator Management Panel</h3>
                <p>Only authorized investigators and system administrators can use this feature.</p>

                <div class="form-group">
                    <label for="investigateReportId">Report ID</label>
                    <input type="number" id="investigateReportId" class="form-control"
                        placeholder="Enter report ID to process">
                </div>

                <div class="form-group">
                    <label for="newStatus">Update Status</label>
                    <select id="newStatus" class="form-control">
                        <option value="1">Under Investigation</option>
                        <option value="2">Resolved</option>
                        <option value="3">Dismissed</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="notes">Investigation Notes</label>
                    <textarea id="notes" class="form-control" rows="4"
                        placeholder="Add investigation notes..."></textarea>
                </div>

                <button onclick="updateReportStatus()" class="btn btn-warning">üìù Update Status</button>
                <button onclick="addNotes()" class="btn btn-success">üìã Add Notes</button>
            </div>

            <div class="card">
                <h4>üë• Investigator Management</h4>
                <div class="form-group">
                    <label for="investigatorAddress">Investigator Address</label>
                    <input type="text" id="investigatorAddress" class="form-control"
                        placeholder="0x...">
                </div>
                <button onclick="addInvestigator()" class="btn btn-success">‚ûï Add Investigator</button>
                <button onclick="removeInvestigator()" class="btn btn-danger">‚ùå Remove Investigator</button>
            </div>
        </div>

        <div class="tab-content" id="stats-tab">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalReports">0</div>
                    <div>Total Reports</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="resolvedReports">0</div>
                    <div>Resolved</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="pendingReports">0</div>
                    <div>Pending</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="successRate">0%</div>
                    <div>Success Rate</div>
                </div>
            </div>

            <div class="card">
                <h3>üîÑ Refresh Statistics</h3>
                <button onclick="loadStats()" class="btn btn-primary">üìä Update Statistics</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/ethers@6.11.1/dist/ethers.umd.min.js"></script>
    <script src="app.js"></script>
</body>
</html>